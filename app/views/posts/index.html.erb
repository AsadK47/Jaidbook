
<h1 class='title'>All Posts</h1>
<% @posts.each do |post| %>
    <div class='each-post'>
        <div class="avatar">
          <% if post.user.avatar.attached? %>
            <%= image_tag post.user.avatar.variant(resize: "100x100!"), class: "rounded-circle" %>
          <% else %>
            <%= image_tag gravatar_image_url(post.user.email, size: 100), height: 100, width: 100, class: "rounded-circle" %>
          <% end %>
        </div>
        <div class='post-content'>
          <h3 class= 'title'><%= post.title %></h3>
          <p><%= truncate(post.body) %></p>
          <% if post.image.attached? %>
            <%= image_tag url_for(post.image) %>
          <% end %>
          <br>
          <p><i class="spaced red fa fa-heart" aria-hidden="true"></i><%= post.likes.count %> <%= (post.likes.count) == 1 ? 'Like' : 'Likes'%></p>
          <p>Posted by <%= post.email %> at <%= post.created_at %></p>
        </div>
        <div class='button'>
          <a><%= link_to "Read More", post_path(post), :class => 'btn btn-info' %></a>
        </div>
    </div>
<% end %>

<style>

  .red {
    color: red;
  }

  .spaced {
    padding-right: 5px;
  }

</style>
